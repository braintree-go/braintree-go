language: go
go_import_path: github.com/lionelbarrow/braintree-go

jobs:
  include:
    - stage: analysis
      go: 1.8
      script:
        - go vet ./...
        - go get -u github.com/kisielk/errcheck && CGO_ENABLED=0 errcheck ./...
        - diff -u <(echo -n) <(gofmt -d .)

    - stage: test
      go: 1.8
      script:
        - source .default.env
        - go test -parallel 15 -v ./...

    - stage: test
      go: 1.7
      script:
        - source .default.env
        - go test -parallel 15 -v ./...

    - stage: test
      go: 1.6
      script:
        - source .default.env
        - go test -parallel 15 -v ./...

